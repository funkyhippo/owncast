(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{24019:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(1413),i=r(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},a=r(42922),s=function(e,t){return i.createElement(a.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:o}))};s.displayName="ClockCircleOutlined";var l=i.forwardRef(s)},24308:function(e,t,r){"use strict";r.d(t,{c4:function(){return o}});var n=r(4942),i=r(87462),o=["xxl","xl","lg","md","sm","xs"],a={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},s=new Map,l=-1,c={},u={matchHandlers:{},dispatch:function(e){return c=e,s.forEach((function(e){return e(c)})),s.size>=1},subscribe:function(e){return s.size||this.register(),l+=1,s.set(l,e),e(c),l},unsubscribe:function(e){s.delete(e),s.size||this.unregister()},unregister:function(){var e=this;Object.keys(a).forEach((function(t){var r=a[t],n=e.matchHandlers[r];null===n||void 0===n||n.mql.removeListener(null===n||void 0===n?void 0:n.listener)})),s.clear()},register:function(){var e=this;Object.keys(a).forEach((function(t){var r=a[t],o=function(r){var o=r.matches;e.dispatch((0,i.Z)((0,i.Z)({},c),(0,n.Z)({},t,o)))},s=window.matchMedia(r);s.addListener(o),e.matchHandlers[r]={mql:s,listener:o},o(s)}))}};t.ZP=u},27561:function(e,t,r){var n=r(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},67990:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},33448:function(e,t,r){var n=r(44239),i=r(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},14841:function(e,t,r){var n=r(27561),i=r(13218),o=r(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):a.test(e)?NaN:+e}},86401:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stream-health",function(){return r(26102)}])},89270:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(85893),i=r(31877),o=r(92616),a=r.n(o),s=r(58091),l=r(60727);function c(e){var t={};return e.forEach((function(e){var r=new Date(e.time),n=(0,s.Z)(r,"H:mma");t[n]=e.value})),t}function u(e){var t=e.data,r=e.title,i=e.color,o=e.unit,a=e.dataCollections,s=e.yFlipped,u=e.yLogarithmic,d=[];t&&t.length>0&&d.push({name:r,color:i,data:c(t)}),a.forEach((function(e){d.push({name:e.name,data:c(e.data),color:e.color,dataset:e.options})}));var f={scales:{y:{reverse:!1,type:"linear"},x:{type:"time"}}};return f.scales.y.reverse=s,f.scales.y.type=u?"logarithmic":"linear",(0,n.jsx)("div",{className:"line-chart-container",children:(0,n.jsx)(l.wW,{xtitle:"Time",ytitle:r,suffix:o,legend:"bottom",color:i,data:d,download:r,library:f})})}a().use(i.Z),u.defaultProps={dataCollections:[],data:[],title:"",yFlipped:!1,yLogarithmic:!1}},26102:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var n=r(34051),i=r.n(n),o=r(85893),a=r(84916),s=r(26713),l=r(25968),c=r(6226),u=r(97751),d=r(74763),f=r(14670),p=r(67294),h=r(1413),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M723 620.5C666.8 571.6 593.4 542 513 542s-153.8 29.6-210.1 78.6a8.1 8.1 0 00-.8 11.2l36 42.9c2.9 3.4 8 3.8 11.4.9C393.1 637.2 450.3 614 513 614s119.9 23.2 163.5 61.5c3.4 2.9 8.5 2.5 11.4-.9l36-42.9c2.8-3.3 2.4-8.3-.9-11.2zm117.4-140.1C751.7 406.5 637.6 362 513 362s-238.7 44.5-327.5 118.4a8.05 8.05 0 00-1 11.3l36 42.9c2.8 3.4 7.9 3.8 11.2 1C308 472.2 406.1 434 513 434s205 38.2 281.2 101.6c3.4 2.8 8.4 2.4 11.2-1l36-42.9c2.8-3.4 2.4-8.5-1-11.3zm116.7-139C835.7 241.8 680.3 182 511 182c-168.2 0-322.6 59-443.7 157.4a8 8 0 00-1.1 11.4l36 42.9c2.8 3.3 7.8 3.8 11.1 1.1C222 306.7 360.3 254 511 254c151.8 0 291 53.5 400 142.7 3.4 2.8 8.4 2.3 11.2-1.1l36-42.9c2.9-3.4 2.4-8.5-1.1-11.3zM448 778a64 64 0 10128 0 64 64 0 10-128 0z"}}]},name:"wifi",theme:"outlined"},m=r(42922),g=function(e,t){return p.createElement(m.Z,(0,h.Z)((0,h.Z)({},e),{},{ref:t,icon:v}))};g.displayName="WifiOutlined";var y=p.forwardRef(g),w=r(24019),x=r(28058),b=r(58827),j=r(89270);function Z(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function C(e){var t=e.title,r=e.description;return(0,o.jsxs)("div",{className:"description-box",children:[(0,o.jsx)(a.Z.Title,{children:t}),(0,o.jsx)(a.Z.Paragraph,{children:r})]})}function F(){var e,t,r,n,h,v,m=(0,p.useState)([]),g=m[0],F=m[1],k=(0,p.useState)([]),N=k[0],P=k[1],E=(0,p.useState)([]),S=E[0],O=E[1],R=(0,p.useState)([]),T=R[0],L=R[1],A=(0,p.useState)([]),q=A[0],V=A[1],I=(0,p.useState)([]),_=I[0],z=I[1],B=(0,p.useState)(0),M=B[0],H=B[1],D=function(){var e,t=(e=i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.rQ)(b.N$);case 3:t=e.sent,F(t.errors),P(t.qualityVariantChanges),O(t.latency),L(t.segmentDownloadDuration),V(t.minPlayerBitrate),z(t.availableBitrates),H(t.segmentLength-.3),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Z(o,n,i,a,s,"next",e)}function s(e){Z(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,p.useEffect)((function(){var e;return D(),e=setInterval(D,b.NE),function(){clearInterval(e)}}),[]);var W=(0,o.jsxs)("div",{children:[(0,o.jsx)(a.Z.Title,{children:"Stream Performance"}),(0,o.jsx)(a.Z.Paragraph,{children:"Data has not yet been collected. Once a stream has begun and viewers are watching this page will be available."})]});if(!(null===g||void 0===g?void 0:g.length))return W;if(!(null===S||void 0===S?void 0:S.length))return W;if(!(null===T||void 0===T?void 0:T.length))return W;var Q=[{name:"Errors",color:"#B63FFF",options:{radius:3},data:g},{name:"Quality changes",color:"#2087E2",options:{radius:2},data:N}],$=[{name:"Average stream latency",color:"#B63FFF",options:{radius:2},data:S}],X=[{name:"Average download duration",color:"#B63FFF",options:{radius:2},data:T},{name:"Approximate limit",color:"#003FFF",data:T.map((function(e){return{time:e.time,value:M}})),options:{radius:0}}],Y=[{name:"Lowest viewer bitrate",color:"#B63FFF",data:q,options:{radius:2}}];_.forEach((function(e){Y.push({name:"".concat(e," kbps stream"),color:"#003FFF",data:q.map((function(e){return{time:e.time,value:1200}})),options:{radius:0}})}));var G=null===(t=null===(e=Y[0])||void 0===e?void 0:e.data[Y[0].data.length-1])||void 0===t?void 0:t.value,J=null===(r=T[T.length-1])||void 0===r?void 0:r.value,K=_[0],U=(null===(h=null===(n=$[0])||void 0===n?void 0:n.data[$[0].data.length-1])||void 0===h?void 0:h.value)||0,ee=0;((null===(v=Q[0])||void 0===v?void 0:v.data.length)||0)>5?ee=Q[0].data.slice(-5).reduce((function(e,t){return e+Number(t.value)}),0):ee=Q[0].data.reduce((function(e,t){return e+Number(t.value)}),0);var te=G>0||J>0||ee>0,re=null,ne=null;0!==G&&G<K&&(re="At least one of your viewers is playing your stream at ".concat(G,"kbps, slower than ").concat(K,"kbps, the lowest quality you made available, experiencing buffering. Consider adding a lower quality with a lower bitrate if the errors over time warrant this.")),J>M&&(ne="Your viewers may be consuming your video slower than required. This may be due to slow networks or your latency configuration. Consider adding a lower quality with a lower bitrate or experiment with increasing the latency buffer setting.");var ie=ee>0?"#B63FFF":"#FFFFFF",oe={display:"flex",alignItems:"center",justifyContent:"center",height:"80px"};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z.Title,{children:"Stream Performance"}),(0,o.jsx)(a.Z.Paragraph,{children:"This tool hopes to help you identify and troubleshoot problems you may be experiencing with your stream. It aims to aggregate experiences across your viewers, meaning one viewer with an exceptionally bad experience may throw off numbers for the whole, especially with a low number of viewers."}),(0,o.jsx)(a.Z.Paragraph,{children:"The data is only collected by those using the Owncast web interface and is unable to gain insight into external players people may be using such as VLC, MPV, QuickTime, etc."}),(0,o.jsxs)(s.Z,{direction:"vertical",size:"middle",children:[(0,o.jsxs)(l.Z,{gutter:[16,16],justify:"space-around",style:{display:te?"flex":"none"},children:[(0,o.jsx)(c.Z,{children:(0,o.jsx)(u.Z,{type:"inner",children:(0,o.jsx)("div",{style:oe,children:(0,o.jsx)(d.Z,{title:"Slowest Viewer Speed",value:"".concat(G),prefix:(0,o.jsx)(y,{style:{marginRight:"5px"}}),precision:0,suffix:"kbps"})})})}),(0,o.jsx)(c.Z,{children:(0,o.jsx)(u.Z,{type:"inner",children:(0,o.jsx)("div",{style:oe,children:(0,o.jsx)(d.Z,{title:"Average Latency",value:"".concat(U),prefix:(0,o.jsx)(w.Z,{style:{marginRight:"5px"}}),precision:0,suffix:"seconds"})})})}),(0,o.jsx)(c.Z,{children:(0,o.jsx)(u.Z,{type:"inner",children:(0,o.jsxs)("div",{style:oe,children:[(0,o.jsx)(d.Z,{title:"Recent Playback Errors",value:"".concat(ee||0),valueStyle:{color:ie},prefix:(0,o.jsx)(x.Z,{style:{marginRight:"5px"}}),suffix:""})," "]})})})]}),(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(C,{title:"Video Segment Download",description:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z.Paragraph,{children:"Once a video segment takes too long to download a viewer will experience buffering. If you see slow downloads you should offer a lower quality for your viewers, or find other ways, possibly an external storage provider, a CDN or a faster network, to improve your stream quality. Increasing your latency buffer can also help for some viewers."}),(0,o.jsx)(a.Z.Paragraph,{children:"In short, once the pink line consistently gets near the blue line, your stream is likely experiencing problems for viewers."})]})}),ne&&(0,o.jsx)(f.Z,{message:"Slow downloads",description:ne,type:"error",showIcon:!0}),(0,o.jsx)(j.Z,{title:"Seconds",dataCollections:X,color:"#FF7700",unit:"s",yLogarithmic:!0})]}),(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(C,{title:"Player Network Speed",description:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z.Paragraph,{children:"The slowest bitrate of any of your viewers. Once somebody's bitrate drops below the lowest video variant bitrate they will experience buffering. If you see viewers with slow connections trying to play your video you should consider offering an additional, lower quality."}),(0,o.jsx)(a.Z.Paragraph,{children:"In short, once the pink line gets near the lowest blue line, your stream is likely experiencing problems for at least one of your viewers."})]})}),re&&(0,o.jsx)(f.Z,{message:"Low bandwidth viewers",description:re,type:"error",showIcon:!0}),(0,o.jsx)(j.Z,{title:"Lowest Player Bitrate",dataCollections:Y,color:"#FF7700",unit:"kbps",yLogarithmic:!0})]}),(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(C,{title:"Errors and Quality Changes",description:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z.Paragraph,{children:"Recent number of errors, including buffering, and quality changes from across all your viewers. Errors can occur for many reasons, including browser issues, plugins, wifi problems, and they don't all represent fatal issues or something you have control over."}),"A quality change is not necessarily a negative thing, but if it's excessive and coinciding with errors you should consider adding another quality variant.",(0,o.jsx)(a.Z.Paragraph,{})]})}),(0,o.jsx)(j.Z,{title:"#",dataCollections:Q,color:"#FF7700",unit:""})]}),(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(C,{title:"Average Latency",description:"An approximate, averaged, seconds across all your viewers that they are behind your live video. The more people buffer the further behind they will be. High latency itself is not a problem, but some people care about this more than others."}),(0,o.jsx)(j.Z,{title:"Seconds",dataCollections:$,color:"#FF7700",unit:"s"})]})]})]})}},60057:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(4942),i=r(1413),o=r(97685),a=r(91),s=r(67294),l=r(82532),c=r(94184),u=r.n(c),d={adjustX:1,adjustY:1},f=[0,0],p={topLeft:{points:["bl","tl"],overflow:d,offset:[0,-4],targetOffset:f},topCenter:{points:["bc","tc"],overflow:d,offset:[0,-4],targetOffset:f},topRight:{points:["br","tr"],overflow:d,offset:[0,-4],targetOffset:f},bottomLeft:{points:["tl","bl"],overflow:d,offset:[0,4],targetOffset:f},bottomCenter:{points:["tc","bc"],overflow:d,offset:[0,4],targetOffset:f},bottomRight:{points:["tr","br"],overflow:d,offset:[0,4],targetOffset:f}},h=r(15105),v=h.Z.ESC,m=h.Z.TAB;function g(e){var t=e.visible,r=e.setTriggerVisible,n=e.triggerRef,i=e.menuRef,o=e.menuClassName,a=e.onVisibleChange,l=function(){t&&n.current&&(n.current.triggerRef.current&&n.current.triggerRef.current.focus(),r(!1),"function"===typeof a&&a(!1))},c=function(e){switch(e.keyCode){case v:case m:l()}};s.useEffect((function(){return t?(setTimeout((function(){!function(){if(i.current){var e,t,r,n=(null===(e=i.current.className)||void 0===e?void 0:e.includes(o))?i.current:null===(t=(r=i.current).querySelector)||void 0===t?void 0:t.call(r,o);n&&n.focus()}}(),window.addEventListener("keydown",c)}),100),function(){window.removeEventListener("keydown",c)}):function(){return null}}),[t]);return{returnFocus:function(){t&&n.current&&n.current.triggerRef.current&&setTimeout((function(){var e,t,r;null===(e=n.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(r=t.current)||void 0===r||r.focus()}),100)}}}var y=r(42550),w=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"];function x(e,t){var r=e.arrow,c=void 0!==r&&r,d=e.prefixCls,f=void 0===d?"rc-dropdown":d,h=e.transitionName,v=e.animation,m=e.align,x=e.placement,b=void 0===x?"bottomLeft":x,j=e.placements,Z=void 0===j?p:j,C=e.getPopupContainer,F=e.showAction,k=e.hideAction,N=e.overlayClassName,P=e.overlayStyle,E=e.visible,S=e.trigger,O=void 0===S?["hover"]:S,R=(0,a.Z)(e,w),T=s.useState(),L=(0,o.Z)(T,2),A=L[0],q=L[1],V="visible"in e?E:A,I=s.useRef(null);s.useImperativeHandle(t,(function(){return I.current}));var _=s.useRef(null),z="".concat(f,"-menu"),B=g({visible:V,setTriggerVisible:q,triggerRef:I,menuRef:_,menuClassName:z,onVisibleChange:e.onVisibleChange}).returnFocus,M=function(){var t=e.overlay;return"function"===typeof t?t():t},H=function(t){var r=e.onOverlayClick,n=M().props;q(!1),r&&r(t),n.onClick&&n.onClick(t),B()},D=function(){var e=M(),t={prefixCls:z,onClick:H,ref:(0,y.Yr)(e)?_:void 0};return"string"===typeof e.type&&delete t.prefixCls,s.createElement(s.Fragment,null,c&&s.createElement("div",{className:"".concat(f,"-arrow")}),s.cloneElement(e,t))},W=k;return W||-1===O.indexOf("contextMenu")||(W=["click"]),s.createElement(l.Z,(0,i.Z)((0,i.Z)({builtinPlacements:Z},R),{},{prefixCls:f,ref:I,popupClassName:u()(N,(0,n.Z)({},"".concat(f,"-show-arrow"),c)),popupStyle:P,action:O,showAction:F,hideAction:W||[],popupPlacement:b,popupAlign:m,popupTransitionName:h,popupAnimation:v,popupVisible:V,stretch:function(){var t=e.minOverlayWidthMatchTrigger,r=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!r}()?"minWidth":"",popup:"function"===typeof e.overlay?D:D(),onPopupVisibleChange:function(t){var r=e.onVisibleChange;q(t),"function"===typeof r&&r(t)},getPopupContainer:C}),function(){var t=e.children,r=t.props?t.props:{},n=u()(r.className,function(){var t=e.openClassName;return void 0!==t?t:"".concat(f,"-open")}());return V&&t?s.cloneElement(t,{className:n}):t}())}var b=s.forwardRef(x)}},function(e){e.O(0,[570,91,961,751,763,80,774,888,179],(function(){return t=86401,e(e.s=t);var t}));var t=e.O();_N_E=t}]);